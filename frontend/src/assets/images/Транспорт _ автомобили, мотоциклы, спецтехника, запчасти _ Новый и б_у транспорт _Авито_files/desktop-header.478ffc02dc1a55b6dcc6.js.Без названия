/*! For license information please see desktop-header.478ffc02dc1a55b6dcc6.js.LICENSE.txt */
"use strict";(self["__LOADABLE_LOADED_CHUNKS__"]=self["__LOADABLE_LOADED_CHUNKS__"]||[]).push([[7215],{25550:function(e,t,n){n.d(t,{Z:function(){return At}});var a=n(15691),r=n.n(a),l=n(29363),i=n(99322),o=n(5035),s=n(63123),c=n(92906),u=n(8658),m=n(89645),d=n(49777),f=n(59692),v=n(23931),h=n(43193),p=n(95063),E=n(64167),g=n(28910),k=n(54133),N=n(70820),y=n(22854),b=n(27082),C=n(58278),_=n(82444);function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x="notifications-counter",S="/js/notifications/count?platform=desktop",I=5*60*1e3,Z="profile-notifications";var P=function(){function e(t){var n=t.userId,a=t.currentPage,r=t.updateUI;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"currentPage",void 0),A(this,"updateUI",void 0),A(this,"userId",void 0),this.userId=n,this.updateUI=r,this.currentPage=a,this.checkCurrentUserData(),this.subscribeVisibilityChange(),this.subscribeLocalStorageChange(),document.hidden||(this.isNotificationsPage()?this.resetCounter():this.init())}var t,n,a;return t=e,(n=[{key:"checkCurrentUserData",value:function(){var e=localStorage.getItem(x);if(e)try{JSON.parse(e).userId!==this.userId&&localStorage.removeItem(x)}catch(t){}}},{key:"subscribeVisibilityChange",value:function(){var e=this;document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(e.isNotificationsPage()?e.resetCounter():e.init())}))}},{key:"subscribeLocalStorageChange",value:function(){var e=this;window.addEventListener("storage",(function(t){if(t.key===x&&t.newValue)try{var n=JSON.parse(t.newValue);e.updateUI(n.unread)}catch(a){}}))}},{key:"init",value:function(){var e,t=null,n=localStorage.getItem(x);if(n)try{t=JSON.parse(n)}catch(a){}t?(e=t.timestamp,Date.now()-e>=I?(localStorage.removeItem(x),this.fetchCounterData()):this.updateUI(t.unread)):this.fetchCounterData()}},{key:"resetCounter",value:function(){localStorage.removeItem(x);var e={userId:this.userId,timestamp:Date.now(),unread:0};localStorage.setItem(x,JSON.stringify(e))}},{key:"fetchCounterData",value:function(){var e=this;fetch(S,{credentials:"same-origin",headers:{Accept:"application/json"}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){var n=t.unread;e.updateUI(n);var a={userId:e.userId,timestamp:Date.now(),unread:n};localStorage.setItem(x,JSON.stringify(a))})).catch((function(){}))}},{key:"isNotificationsPage",value:function(){return this.currentPage===Z}}])&&w(t.prototype,n),a&&w(t,a),e}(),L=n(82662),V=n(89506),O="PRO_ONBOARDING_HAS_BEEN_SHOWN",M=n(28150),R=n(94184),U=n.n(R),j=n(82998),D=n(86136),B=n(74644),F=n(87271),T=n(50841),z=n(19007),H=n(33821),G=n(3982),Y=n(21522),J=n(10510),q=n(8203),X=function(e){var t=e.size;return a.createElement("svg",{version:"1",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t},viewBox:"0 0 36 36"},a.createElement("path",{fill:"currentColor",d:"M17.1 5.4L13.9 14l-9.2.3c-1.3.1-1.3 1.2-.6 1.8l7.2 5.7-2.5 8.8c-.4 1.1.7 1.6 1.5 1.1l7.6-5.1 7.6 5.1c.6.4 1.8.2 1.5-1.1l-2.5-8.8 7.2-5.7c.8-.7.8-1.7-.6-1.8l-9-.3L19 5.4c-.5-1.1-1.5-1.1-1.9 0z"}))},Q=a.memo(X),W="index-active-_a9kp",$="index-half-star-Jc0O_",K="index-star-F_T58",ee="index-with-hover-effect-YOuq9";function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(e){var t=e.currentRatingValue,n=void 0===t?0:t,r=e.marker,l=e.markerId,i=e.minRatingValues,o=e.onClick,s=e.onMouseEnter,c=e.size,u=e.value,m=e.withHoverEffect;return a.createElement("li",{className:U()(K,te({},ee,m)),"data-marker":r+l,onClick:function(){o&&o(u)},onMouseEnter:function(){s&&s(u)}},a.createElement("div",{className:U()(n>i[1]&&W)},a.createElement(Q,{size:c})),a.createElement("div",{className:U()($,n>i[0]&&W)},a.createElement(Q,{size:c})))},ae=a.memo(ne),re="index-root-pDqqP";function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var oe=[{minRatingValues:[0,0],value:1},{minRatingValues:[1.2,1.7],value:2},{minRatingValues:[2.2,2.7],value:3},{minRatingValues:[3.2,3.7],value:4},{minRatingValues:[4.2,4.7],value:5}],se=function(e){var t=e.marker,n=e.onChange,r=e.size,l=e.value,i=void 0===l?0:l,o=e.withHoverEffect,s=le(a.useState(i),2),c=s[0],u=s[1],m=function(e){n&&n(e)},d=function(e){o&&u(e)};return a.createElement("ul",{className:re,"data-marker":t,onMouseLeave:function(){o&&u(0)}},oe.map((function(e,n){return a.createElement(ae,{key:e.value,currentRatingValue:c,marker:t+"/star",markerId:n,minRatingValues:e.minRatingValues,size:r,value:e.value,withHoverEffect:o,onClick:m,onMouseEnter:d})})))},ce=a.memo(se),ue=n(87111);function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var fe=function(e){var t=e.className,n=e.children,r=me(a.useState(!1),2),l=r[0],i=r[1],o=a.useRef(null),s=(0,ue.k)(l),c=s.purchases+s.sales;return a.useEffect((function(){var e=o.current;if(!e)return function(){};var t=new IntersectionObserver((function(e){e.some((function(e){return e.isIntersecting}))&&(i(!0),t.disconnect())}));return t.observe(e),function(){t.disconnect()}}),[i]),a.createElement("li",{ref:o,className:t,"data-marker":"header/tooltip-list-item"},n({actionOrdersCount:c}))},ve="index-link-nko4G",he="index-profile-nav-I188g",pe="index-profile-nav-group-i19VZ",Ee="index-profile-nav-item-_1GCu",ge="index-profile-nav-item_value-__w0G",ke="index-profile-nav-item-bonus-Rxa6V",Ne="index-profile-nav-link-_hRPc",ye="index-reset-link-PfJhT",be="index-external-icon-_hQsm",Ce="index-profile-nav-item_exit-HGwrS",_e="index-rating-line-sXrT0",we="index-score-_TpdY",Ae="index-stars-_jrjX",xe="index-tag-uvLvF",Se="index-pro-lk-nav-item-BioMu",Ie="index-pro-lk-label-_b0B0",Ze="index-pro-lk-icon-GpUC_",Pe="index-pro-lk-onboarding-erkUs",Le=n(91576),Ve=function(e){var t,n=e.user;return n&&null!==(t=n.passport)&&void 0!==t&&t.isFeatureEnabled?a.createElement(Le.ZP,{props:{withSwitchProfileWidget:!0},script:{name:"id-component-profile-switch",module:"Component",scope:"profileSwitch"}}):null};function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Re=["бонус","бонуса","бонусов"],Ue="https://ipoteka.avito.ru",je=function(e){var t,n,l,i,o=e.currentPage,s=e.handlers,c=e.headerInfo,m=e.hierarchy,d=e.host,f=void 0===d?"":d,v=e.unreadFavoritesCount,h=e.unreadMessengerCount,p=e.unreadNotificationsCount,E=e.user,g=e.userAccount,k=e.isSpaEnabled,y=Oe((0,a.useState)(!1),2),b=y[0],C=y[1],_=(null==g?void 0:g.isSeparationBalance)&&g.balance.bonus,w=_||(null==E||null===(t=E.tariffInfo)||void 0===t?void 0:t.isVisible),A=(null==E||null===(n=E.tariffInfo)||void 0===n?void 0:n.isActive)||(null==m?void 0:m.isEmployee);(0,a.useEffect)((function(){var e="PRO_ENTRY_POINT_EVENT_HAS_BEEN_SENT";sessionStorage.getItem(e)||(u.Z.sendEvent(6573,1,{has_onboarding:Boolean(null==E?void 0:E.hasProWelcomeOnboarding)}),sessionStorage.setItem(e,"1")),null===localStorage.getItem(O)&&null!=E&&E.hasProWelcomeOnboarding&&C(!0)}),[E]);var x,S=function(){return r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/account"),noVisited:!0},"Кошелёк"),r().createElement("div",{className:ge},r().createElement("div",{"data-marker":"header/wallet-value"},g?r().createElement(H.Z,{value:_?g.balance.real:g.balance.total,precision:0,type:"currency"}):null,g&&_?r().createElement("span",{className:ke},r().createElement(H.Z,{value:g.balance.bonus,precision:0})," ",(0,G.plural)(g.balance.bonus,Re)):null)))};return r().createElement("ul",{className:he,"data-marker":"header/tooltip-list"},function(){if(null==c||!c.rating)return null;var e,t=c.rating,n=r().createElement("div",{className:_e},(void 0!==t.scoreFloat||void 0!==t.score)&&r().createElement(r().Fragment,null,r().createElement("span",{className:we},r().createElement(T.Z,{size:"s",bold:!0},(e=t.scoreFloat||t.score||0,Number(e).toFixed(1).replace(".",",")))),r().createElement("span",{className:Ae},r().createElement(ce,{value:t.scoreFloat||t.score||0,marker:"stars",size:"20px"}))),r().createElement(T.Z,{size:"s"},t.summary));return"ratings"===o?r().createElement(T.Z,null,n):r().createElement("div",{className:pe},r().createElement(z.Z,{className:ye,href:"".concat(f,"/profile/rating"),noVisited:!0},n))}(),A&&r().createElement("div",{className:pe},(x=null!=m&&m.isEmployee?"https://pro.avito.ru/":"https://pro.avito.ru/?utm_source=avito&utm_medium=organic&utm_content=top_menu_link",r().createElement("li",{className:U()(Ee,Se)},r().createElement(r().Fragment,null,r().createElement(z.Z,{className:U()(Ne,ye),href:x,target:"_blank",rel:"noopener noreferrer",noVisited:!0,onClick:null==s?void 0:s.handleProClick},r().createElement("div",{className:Ie},r().createElement(J.D,null,"Кабинет")," ",r().createElement("div",{className:Ze}),b&&r().createElement("div",{className:Pe},r().createElement(Y.E,{size:"s"})))),(null==m?void 0:m.isEmployee)&&(null==m?void 0:m.companyName)&&r().createElement(q.P,{size:"xs",noAccent:!0},"сотрудник компании «",m.companyName,"»"))))),r().createElement("div",{className:pe},r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile"),noVisited:!0},"Мои объявления")),r().createElement(fe,{className:Ee},(function(e){var t=e.actionOrdersCount;return r().createElement(r().Fragment,null,f||!k?r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/orders/sales?source=shortcut"),noVisited:!0},"Заказы"):r().createElement(M.Link,{className:U()(ve,Ne),to:"/orders/sales?source=shortcut"},"Заказы"),t?r().createElement("div",{className:ge},t):null)})),r().createElement("li",{className:Ee},f||!k?r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile/contacts"),noVisited:!0},"Мои отзывы"):r().createElement(M.Link,{className:U()(ve,Ne),to:"/profile/contacts"},"Мои отзывы")),r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},f||!k?r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/favorites"),noVisited:!0,"data-marker":"header/username-tooltip/favorites"},"Избранное"):r().createElement(M.Link,{className:U()(ve,Ne),to:"/favorites","data-marker":"header/username-tooltip/favorites"},"Избранное"),v?r().createElement("div",{className:ge,"data-marker":"header/username-tooltip/favorites/count"},v):null)),r().createElement("div",{className:pe},r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},f||!k?r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile/messenger"),noVisited:!0,onClick:null==s?void 0:s.handleMessengerClick},"Сообщения"):r().createElement(M.Link,{className:U()(ve,Ne),to:"/profile/messenger",onClick:null==s?void 0:s.handleMessengerClick},"Сообщения"),h?r().createElement("div",{className:ge},h):null),E?r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},f||!k?r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile/notifications"),noVisited:!0},"Уведомления"):r().createElement(M.Link,{className:U()(ve,Ne),to:"/profile/notifications"},"Уведомления"),p?r().createElement("div",{className:ge},p):null):null),w?r().createElement(r().Fragment,null,r().createElement("div",{className:pe},S()),null!=E&&null!==(l=E.tariffInfo)&&void 0!==l&&l.isVisible?r().createElement("div",{className:pe},null!=E&&E.tariffInfo?r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f).concat(E.tariffInfo.url),noVisited:!0},E.tariffInfo.name),E.tariffInfo.isActive?r().createElement("div",{className:ge},r().createElement("div",{"data-marker":"header/wallet-value"},r().createElement(H.Z,{value:E.tariffInfo.balanceLeft,autoPrecision:!0,precision:2,type:"currency"}),E.tariffInfo.hasBonuses?r().createElement("span",{className:ke},r().createElement(H.Z,{value:E.tariffInfo.bonusesLeft,autoPrecision:!0,precision:2})," ",(0,G.plural)(E.tariffInfo.bonusesLeft,Re)):null)):null):null):null):null,r().createElement("div",{className:pe},w?null:S(),r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/paid-services/listing-fees"),noVisited:!0},"Платные услуги")),function(){if(null==E||!E.loyaltyPreferences)return null;var e=E.loyaltyPreferences,t=e.tag,n=e.title;return r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/loyalty"),noVisited:!0},n,t&&r().createElement(r().Fragment,null," ",r().createElement("span",{className:xe},t))))}(),null==E||!E.isLegal||E.hasShopSubscription||null!=E&&E.hasAvitoPro?null:r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/account/documents"),noVisited:!0},"Бухгалтерия")),function(){if(null!=E&&E.hasShopSubscription||null!=E&&E.isLegal&&null!=E&&E.hasAvitoPro){var e,t="/professionals/accounting";return null!=E&&null!==(e=E.tariffInfo)&&void 0!==e&&e.isVisible?t="/professionals/employees":E.hasShopSubscription&&(t="/professionals/tariff"),r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f).concat(t),noVisited:!0},"Для профессионалов"))}return null}(),function(){if(null==E||!E.mortgageAccount)return null;var e=E.mortgageAccount,t=e.tag,n=e.title;return r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:Ue,noVisited:!0,rel:"noopener noreferrer",target:"_blank",onClick:null==s?void 0:s.handleMortgageAccountLinkClick},n,r().createElement("span",{className:be}),t&&r().createElement(r().Fragment,null," ",r().createElement("span",{className:xe},t))))}()),r().createElement("div",{className:pe},r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile/basic"),noVisited:!0},"Управление профилем")),r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile/safety"),noVisited:!0},"Защита профиля")),r().createElement("li",{className:Ee,"data-marker":"header/tooltip-list-item"},r().createElement(z.Z,{className:U()(Ne,ye),href:"".concat(f,"/profile/settings"),noVisited:!0},"Настройки"))),(null==E||null===(i=E.passport)||void 0===i?void 0:i.isFeatureEnabled)&&r().createElement("div",{className:pe},r().createElement(N.ZP,{mode:"hide"},r().createElement(Ve,{user:E}))),r().createElement("div",{className:pe},r().createElement("li",{className:U()(Ee,Ce),"data-marker":"header/tooltip-list-item"},r().createElement("a",{className:U()(ve,Ne),href:"".concat(f,"/profile/exit"),onClick:null==s?void 0:s.handleSecuredTouchLogout},"Выйти"))))},De=r().memo(je),Be=n(4997),Fe=n.n(Be),Te="index-root-_NPPn",ze="index-sticky-TtGd0",He="index-icon-count-MhOkL",Ge="index-icon-count_red-_YT65",Ye="index-inner-iPEdy",Je="index-nav-r2kHM",qe="index-nav-item-_YcoS",Xe="index-nav-link-muv1u",Qe="index-services-menu-WxCxG",We="index-services-menu-link-Ia0Gb",$e="index-services-menu-item_username-_YDXo",Ke="index-services-menu-item_avatar-k_87G",et="index-services-menu-link-not-authenticated-Pzomx",tt="index-services-menu-avatar-XDJsi",nt="index-services-menu-avatar-image-UHk1Y",at="index-services-menu-icon-wrap-hucq_",rt="index-services-menu-icon-Bnhvb",lt="index-services-menu-dropdown-jvXqH",it="index-services-menu-dropdown-popup-AErO5",ot="index-services-menu-item-_O32t",st="index-services-menu-item_profile-_6_4k",ct="index-services-menu-dropdown-popup_left-aYZYy",ut="index-services-menu-dropdown-popup_right-tNIHA",mt="index-add-button-wrapper-s0SLe",dt="index-add-button-RRqyw",ft="index-narrowLayout-_YlhA",vt="index-nav-catalogs-bsSOl",ht="index-nav-catalog-link-N33oX",pt="index-nav-catalog-item-JUgGq",Et="index-responsive-N4Ry5",gt=(0,a.memo)((function(){return r().createElement("li",{className:U()(qe,lt)},r().createElement("span",{className:U()(Xe,We,ht)},"Каталоги"),r().createElement("div",{className:U()(it,vt)},r().createElement("div",{className:pt},r().createElement(z.Z,{href:"/catalog/auto",noVisited:!0,onClick:function(){Fe().set("comparison_from_page","main_menu",{expires:1})}},"Каталог автомобилей")),r().createElement("div",{className:pt},r().createElement(z.Z,{href:"/moskva/kvartiry/catalog/novostroyki-ASgBAQICAkSSA8YQ8sUO8JOaAgFA5gcUjlI?cd=1&rn=30655",noVisited:!0,onClick:function(){u.Z.sendEvent(6601,2,{node_type:"main_menu",target_page:"/moskva/kvartiry/catalog/novostroyki-ASgBAQICAkSSA8YQ8sUO8JOaAgFA5gcUjlI?cd=1&rn=30655"})}},"Каталог новостроек"))))}));function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=function(e){var t=e.addButtonText,n=void 0===t?"Разместить объявление":t,a=e.cartCount,l=e.currentPage,i=e.headerInfo,o=e.handlers,s=e.hasAddButton,c=e.hierarchy,u=e.host,m=void 0===u?"":u,d=e.isCartEnabled,f=e.isCatalogsVisible,v=e.isResponsive,h=e.isNarrowLayout,p=e.isSticky,E=e.isSpaEnabled,g=e.servicesClassName,k=e.unreadFavoritesCount,N=e.unreadMessengerCount,y=e.unreadNotificationsCount,b=e.user,C=e.userAccount,_=function(){var e,t=U()($e,kt({},Ke,null==b?void 0:b.avatar));return r().createElement("div",{className:t},b?r().createElement("div",{className:lt,"data-marker":"header/menu-profile"},r().createElement("a",{href:"".concat(m,"/profile"),className:U()(We,"ym-hide-content"),"data-marker":"header/username-button"},b.avatar?r().createElement("div",{className:tt},r().createElement("img",{src:b.avatar.url,className:nt,alt:"Аватар",onClick:null==o?void 0:o.handleAvatarClick})):null,r().createElement("span",{onClick:null==o?void 0:o.handleUsernameClick},b.name)),r().createElement("div",{className:U()(it,(e={},kt(e,ut,!s),kt(e,ct,s),e)),"data-marker":"header/username-tooltip"},r().createElement(De,{currentPage:l,handlers:{handleProClick:null==o?void 0:o.handleProfilePopupProClick,handleMessengerClick:null==o?void 0:o.handleProfilePopupMessengerClick,handleMortgageAccountLinkClick:null==o?void 0:o.handleMortgageAccountLinkClick},headerInfo:i,hierarchy:c,unreadMessengerCount:N,unreadFavoritesCount:k,unreadNotificationsCount:y,userAccount:C,user:b,host:m,isSpaEnabled:E}))):r().createElement("a",{className:U()(We,et),href:"#login?authsrc=h","data-marker":"header/login-button",onClick:null==o?void 0:o.handleLoginClick},"Вход и регистрация"))},w=function(){return r().createElement("div",{className:Qe},r().createElement("div",{"data-marker":"header/favorites",className:ot},r().createElement("a",{className:We,href:"".concat(m,"/favorites"),title:"Избранное",onClick:null==o?void 0:o.handleFavoritesClick},r().createElement("span",{className:at},r().createElement("span",{className:rt},r().createElement("svg",{width:"21",height:"24",xmlns:"http://www.w3.org/2000/svg"},r().createElement("path",{d:"M10.918 5.085a5.256 5.256 0 0 1 7.524 0c2.077 2.114 2.077 5.541 0 7.655l-7.405 7.534a.75.75 0 0 1-1.074 0L2.558 12.74c-2.077-2.114-2.077-5.54 0-7.655a5.256 5.256 0 0 1 7.524 0c.15.152.289.312.418.479.13-.167.269-.327.418-.479z",fill:"#CCC",fillRule:"nonzero"}))),k?r().createElement("i",{"data-marker":"header/favorites-counter",className:U()(He,Ge)},k>99?"99+":k):null))),b?r().createElement("div",{"data-marker":"header/notifications",className:ot},r().createElement("a",{className:We,href:"".concat(m,"/profile/notifications"),title:"Уведомления"},r().createElement("span",{className:at},r().createElement("span",{className:rt},r().createElement("svg",{width:"21",height:"24",xmlns:"http://www.w3.org/2000/svg"},r().createElement("g",{fill:"#CDCDCD",fillRule:"evenodd"},r().createElement("path",{d:"M1.816 17.744L4 14V9a6.5 6.5 0 1 1 13 0v5l2.184 3.744A1.5 1.5 0 0 1 17.888 20H3.112a1.5 1.5 0 0 1-1.296-2.256z"}),r().createElement("circle",{cx:"10.5",cy:"20",r:"2.5"})))),y?r().createElement("i",{"data-marker":"header/unread-notifications-counter",className:U()(He,Ge)},y>99?"99+":y):null))):null,b?r().createElement("div",{"data-marker":"header/messenger",className:ot},r().createElement("a",{className:We,href:"".concat(m,"/profile/messenger"),title:"Сообщения",onClick:null==o?void 0:o.handleMessengerClick},r().createElement("span",{className:at},r().createElement("span",{className:rt},r().createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},r().createElement("g",{fill:"#CCC",fillRule:"evenodd"},r().createElement("path",{d:"M8.827 3.28A19.839 19.839 0 0 1 12 3c.97 0 2.027.093 3.173.28A8.135 8.135 0 0 1 22 11.309c0 3.804-2.84 7.01-6.617 7.468A28.26 28.26 0 0 1 12 19c-1.028 0-2.156-.074-3.383-.223A7.523 7.523 0 0 1 2 11.309 8.135 8.135 0 0 1 8.827 3.28z"}),r().createElement("path",{d:"M4.5 15l-1.773 4.963a.8.8 0 0 0 1.15.964L9 18l-4.5-3z"})))),N?r().createElement("i",{"data-marker":"header/unread-chats-counter",className:U()(He,Ge)},N>99?"99+":N):null))):null,b&&d?r().createElement("div",{"data-marker":"header/cart",className:ot},r().createElement("a",{className:We,href:"".concat(m,"/order/cart"),title:"Корзина",onClick:null==o?void 0:o.handleCartClick},r().createElement("span",{className:at},r().createElement("span",{className:rt},r().createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r().createElement("path",{d:"M5.047 2.422a1 1 0 0 0-1.79.803l2.71 11.748-.299 1.049A2.5 2.5 0 1 0 8.292 19.5h4.916a2.5 2.5 0 1 0 0-2H8.292c-.158-.362-.4-.68-.701-.928l.37-1.297A1 1 0 0 0 8 15l10.273-.934a1 1 0 0 0 .885-.779l1.626-7.313A.8.8 0 0 0 20.003 5H6.866a1.01 1.01 0 0 0-.05-.078l-1.769-2.5Z",fill:"#CCC"}))),a?r().createElement("i",{"data-marker":"header/cart-counter",className:U()(He,Ge)},a>99?"99+":a):null))):null,b?r().createElement("div",{className:U()(ot,st)},r().createElement("a",{className:We,href:"".concat(m,"/profile"),onClick:null==o?void 0:o.handleMyItemsClick},"Мои объявления")):null,_())},A=function(){var e,t=U()(Te,g,(kt(e={},Et,v&&!h),kt(e,ft,h),e));return r().createElement(B.D,null,r().createElement(F.f,null,r().createElement("div",{className:t,"data-marker":"header/navbar"},r().createElement("div",{className:Ye},r().createElement("ul",{className:Je},r().createElement("li",{className:qe},r().createElement("a",{className:Xe,href:"".concat(m,"/business"),onClick:null==o?void 0:o.handleBusinessClick},"Для бизнеса")),(null==b?void 0:b.hasAvitoPro)&&r().createElement("li",{className:qe},r().createElement("a",{className:Xe,href:"//pro.avito.ru",rel:"noopener noreferrer",target:"_blank",onClick:null==o?void 0:o.handleProClick},"Авито Pro")),r().createElement("li",{className:qe},r().createElement("a",{className:Xe,href:"//support.avito.ru",rel:"noopener noreferrer",target:"_blank"},"Помощь")),f&&r().createElement(gt,null)),w(),function(){if(!s)return null;var e="".concat(m,"/additem");return b||(e="#login?next=".concat(encodeURIComponent(e),"&authsrc=ca")),!m&&b&&E?r().createElement(M.Link,{className:mt,to:e,onClick:null==o?void 0:o.handleAddClick},r().createElement(D.Z,{className:dt,design:"primary",type:"button"},n)):r().createElement("div",{className:mt},r().createElement(j.Z,{className:dt,href:e,design:"primary",onClick:null==o?void 0:o.handleAddClick},n))}()))))};return p?r().createElement("div",{className:ze},A()):A()},yt=r().memo(Nt),bt=function(e){var t,n,r=e.hasAddButton,l=void 0===r||r,i=e.host,o=e.isResponsive,s=e.isSticky,c=e.isNarrowLayout,m=e.page,d=e.servicesClassName,f=e.counters,v=void 0===f?0:f,h=e.header,p=e.toggles,E=e.user,g=e.isCartEnabled,k=e.isCatalogsVisible,N=e.unreadMessengerCount,y=e.unreadNotificationsCount,b=e.cartCount;return a.createElement(yt,{cartCount:b,currentPage:m,handlers:{handleAddClick:function(){u.Z.sendEvent(2812,0,{pagetype:m}),E||u.Z.sendEvent(330,1,{pagetype:m})},handleAvatarClick:function(){u.Z.sendEvent(2811,0,{from_block:0,pagetype:m})},handleBusinessClick:function(){V.Z.push({event:"gtm.generalEvent",eventCategory:null!=E&&E.isLegal?"verified":"funnel",eventAction:"create_shop",eventLabel:"header_link",eventValue:"value"}),u.Z.sendEvent(2811,0,{pagetype:m})},handleCartClick:function(){u.Z.sendEvent(4647,4,{block_items_display:b,srcp:"header"})},handleFavoritesClick:function(){u.Z.sendEvent(2818,0,{pagetype:m})},handleItemsClick:function(){u.Z.sendEvent(2814,0,{pagetype:m})},handleLoginClick:function(){u.Z.sendEvent(3229,0)},handleMessengerClick:function(){u.Z.sendEvent(3184,0,{s:"top_menu"})},handleMortgageAccountLinkClick:function(){u.Z.sendEvent(6918,0,{})},handleMyItemsClick:function(){u.Z.sendEvent(2814,0,{pagetype:m})},handleProClick:function(){u.Z.sendEvent(3431,1,{from:"header"})},handleProfilePopupProClick:function(){localStorage.setItem(O,"1"),u.Z.sendEvent(3431,1,{from:"headerTooltip"}),u.Z.sendEvent(6577,1,{from_type:"header_sheet"})},handleProfilePopupMessengerClick:function(){u.Z.sendEvent(3184,0,{s:"profile_menu"})},handleUsernameClick:function(){u.Z.sendEvent(2811,0,{from_block:1,pagetype:m})},handleSecuredTouchLogout:function(){(0,L.k)()}},headerInfo:{rating:null==h||null===(t=h.headerInfo)||void 0===t?void 0:t.rating,experiments:null==h||null===(n=h.headerInfo)||void 0===n?void 0:n.experiments},hierarchy:h.hierarchy,isCartEnabled:g,isCatalogsVisible:k,isResponsive:o,isNarrowLayout:c,isSticky:s,isSpaEnabled:null==p?void 0:p.spa_enabled,luri:h.luri,hasAddButton:l,host:i,servicesClassName:d,unreadFavoritesCount:v,unreadMessengerCount:N,unreadNotificationsCount:y,user:E,userAccount:h.userAccount,userLocationId:h.userLocationId})};function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==n["return"]||n["return"]()}finally{if(o)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var wt="@avito/app-nc:read-notification",At=(0,o.Z)((function(){return(0,s.Z)((function(e){var t=e.page;return(0,c.Z)((function(e){var n=Ct(e,1)[0];return function(e){var r,i,o,s=e.hasAddButton,c=void 0===s||s,d=e.host,v=e.isMainPage,p=e.isResponsive,g=e.isSticky,k=e.isNarrowLayout,b=Ct(a.useState(y.Z.get()),2),w=b[0],A=b[1],x=Ct(a.useState(0),2),S=x[0],I=x[1],Z=a.useRef(!1),L=(0,l.x)(),V=(0,m.r)(),O=(0,f.$)().header,M=(0,h.b)(["spa_enabled","is_new_social_auth","is_new_restore_api","recaptcha_enabled"]),R=(0,E.a)(),U="test"===(null==L||null===(r=L.c2c_cart)||void 0===r?void 0:r.testGroup),j=(0,C.i)(R,U),D=v&&"test"===(null==L||null===(i=L.catalog_on_main)||void 0===i?void 0:i.testGroup),B=null==L||null===(o=L.catalog_on_main)||void 0===o?void 0:o.analyticParams;return a.useEffect((function(){if(v&&!Z.current&&B){var e=[B.ab];u.Z.sendEvent(2587,0,{abs:e}),Z.current=!0}}),[v,B,Z]),a.useEffect((function(){return R?y.Z.subscribe(A):y.Z.unsubscribe(A),function(){y.Z.unsubscribe(A)}}),[R]),a.useEffect((function(){var e,n;return R&&(e=new P({currentPage:t.id,userId:R.id,updateUI:function(e){I(e)}}),n=e.fetchCounterData.bind(e),_.Ld(wt,n,!0)),function(){R&&_.r1(wt,n)}}),[R]),a.createElement(a.Fragment,null,a.createElement(N.ZP,{mode:"hide"},a.createElement(n,null)),a.createElement(bt,{cartCount:j,hasAddButton:c,host:d,isResponsive:p,isSticky:g,isNarrowLayout:k,counters:V.total,header:O,toggles:M,user:R,isCartEnabled:U,isCatalogsVisible:D,unreadMessengerCount:w,unreadNotificationsCount:S,page:t.id,servicesClassName:"header-services"}))}}),[k.Z])}))}),[i.O,d.f,b.I,v.A,p._,g.H])}}]);